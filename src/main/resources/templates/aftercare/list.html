<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ì§ì› ê±´ê°• ê²€ì§„ ê²°ê³¼ ëª©ë¡</title>
  <style>
    /* ê²€ìƒ‰ ì˜ì—­ ìŠ¤íƒ€ì¼ */
    .search-container { margin-bottom: 30px; padding: 20px; border: 1px solid #c9c9c9; background-color: #f7f7f7; border-radius: 5px; }
    .search-item { margin-bottom: 10px; display: inline-block; margin-right: 15px; }
    .search-item label { font-weight: bold; margin-right: 5px; }
    .search-actions { margin-top: 15px; text-align: right; }
    /* ë¦¬ìŠ¤íŠ¸ ì˜ì—­ ìŠ¤íƒ€ì¼ */
    table { width: 100%; border-collapse: collapse; table-layout: fixed; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; font-size: 14px; }
    th { background-color: #e9ecef; }
    .grade-r { color: red; font-weight: bold; }
    .grade-y { color: orange; font-weight: bold; }
  </style>
</head>
<body>
<h2>ì§ì› ê±´ê°• ê²€ì§„ ë° ê´€ë¦¬ í˜„í™©</h2>

<div class="search-container">
  <form action="/health/results" method="get" th:object="${search}">

    <div class="search-item">
      <label for="workerName">ì§ì›ëª…:</label>
      <input type="text" id="workerName" th:field="*{workerName}" placeholder="ì§ì›ëª… ì…ë ¥">
    </div>

    <div class="search-item">
      <label for="department">ë¶€ì„œ:</label>
      <select id="department" th:field="*{department}">
        <option value="">ì „ì²´ ë¶€ì„œ</option>
        <option value="ì™•ì†¡í˜¸ìˆ˜ë ˆì €íŒ€">ì™•ì†¡í˜¸ìˆ˜ë ˆì €íŒ€</option>
        <option value="êµí†µì‹œì„¤íŒ€">êµí†µì‹œì„¤íŒ€</option>
        <option value="í¬ì¼ìŠ¤í¬ì¸ ì„¼í„°íŒ€">í¬ì¼ìŠ¤í¬ì¸ ì„¼í„°íŒ€</option>
        <option value="ë°”ë¼ì‚°íœ´ì–‘ë¦¼íŒ€">ë°”ë¼ì‚°íœ´ì–‘ë¦¼íŒ€</option>
      </select>
    </div>

    <div class="search-item">
      <label for="generalGrade">ì¼ë°˜ê²€ì§„ ë“±ê¸‰:</label>
      <select id="generalGrade" th:field="*{generalGrade}">
        <option value="">ì „ì²´</option>
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
      </select>
    </div>

    <div class="search-item">
      <label for="specialGrade">íŠ¹ìˆ˜ê²€ì§„ ë“±ê¸‰:</label>
      <select id="specialGrade" th:field="*{specialGrade}">
        <option value="">ì „ì²´</option>
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
      </select>
    </div>

    <div class="search-item">
      <label for="bhGrade">ë‡Œì‹¬í˜ˆê´€ ë“±ê¸‰:</label>
      <select id="bhGrade" th:field="*{bhGrade}">
        <option value="">ì „ì²´</option>
        <option value="ê³ ">ê³ </option>
        <option value="ì¤‘">ì¤‘</option>
        <option value="ì €">ì €</option>
      </select>
    </div>

    <div class="search-item">
      <label for="msGrade">ê·¼ê³¨ê²©ê³„ ë“±ê¸‰:</label>
      <select id="msGrade" th:field="*{msGrade}">
        <option value="">ì „ì²´</option>
        <option value="ê³ ">ê³ </option>
        <option value="ì¤‘">ì¤‘</option>
        <option value="ì €">ì €</option>
      </select>
    </div>

    <div class="search-item">
      <label for="hasConsultation">ìƒë‹´ ìœ ë¬´:</label>
      <select id="hasConsultation" th:field="*{hasConsultation}">
        <option value="">ì „ì²´</option>
        <option th:value="true">âœ… ìƒë‹´ ìˆìŒ</option>
        <option th:value="false">âŒ ìƒë‹´ ì—†ìŒ</option>
      </select>
    </div>

    <div class="search-actions">
      <button type="submit">ğŸ” ê²€ìƒ‰</button>
      <a th:href="@{/health/results}" class="btn-reset">ğŸ”„ ì´ˆê¸°í™”</a>
    </div>
  </form>
</div>

<hr>

<table>
  <thead>
  <tr>
    <th>No.</th>
    <th>í™˜ìëª…</th>
    <th>ë°œë ¹ì§êµ°</th>
    <th>ë¶€ì„œ</th>
    <th>ì¼ë°˜ê²€ì§„</th>
    <th>ë‡Œì‹¬í‰ê°€</th>
    <th>ê·¼ê³¨ê²©ê³„</th>
    <th>íŠ¹ìˆ˜ê²€ì§„</th>
    <th>ë³´ê±´ìƒë‹´</th>
    <th>ë“±ë¡ì¼</th>
    <th>ìƒì„¸</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="result, iStat : ${results}">
    <td th:text="${iStat.count}">1</td>
    <td th:text="${result.workerName}"></td>
    <td th:text="${result.occupation}"></td>
    <td th:text="${result.department}"></td>

    <td th:text="${result.generalHealthGrade}"></td>
    <td th:text="${result.brainHeartGrade}" th:classappend="${result.brainHeartGrade == 'R' ? 'grade-r' : ''}"></td>
    <td th:text="${result.musculoskeletalGrade}" th:classappend="${result.musculoskeletalGrade == 'R' ? 'grade-r' : (result.musculoskeletalGrade == 'Y' ? 'grade-y' : '')}"></td>
    <td th:text="${result.specialHealthGrade}"></td>

    <td th:text="${result.hasHealthConsultation ? 'âœ…' : 'âŒ'}"></td>

    <td th:text="${#temporals.format(result.registrationDate, 'yyyy-MM-dd HH:mm')}"></td>

    <td>
      <a th:href="@{/health/results/{id}(id=${result.workerId})}">ìƒì„¸</a>
    </td>
  </tr>
  <tr th:if="${#lists.isEmpty(results)}">
    <td colspan="11">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
  </tr>
  </tbody>
</table>
</body>
</html>